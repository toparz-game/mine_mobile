<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Phase4-3ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</title>
</head>
<body>
    <h1>Phase4-3ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ</h1>
    <button onclick="runTest()">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
    <pre id="output"></pre>
    
    <script src="modules/bit-minesweeper.js"></script>
    <script src="modules/simple-bit-csp.js"></script>
    
    <script>
        function runTest() {
            const output = document.getElementById('output');
            output.textContent = '';
            
            try {
                // ãƒ“ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–
                const bitSystem = new BitMinesweeperSystem(16, 16, 40);
                
                // ãƒ¢ãƒƒã‚¯ã‚²ãƒ¼ãƒ ä½œæˆ
                const mockGame = {
                    rows: 16, cols: 16, mines: 40,
                    gameBoard: Array(16).fill().map(() => Array(16).fill(0)),
                    revealedCells: new Set(),
                    flaggedCells: new Set(),
                    isGameOver: false
                };
                
                // CSPã‚½ãƒ«ãƒãƒ¼ä½œæˆ
                const cspSolver = new SimpleBitCSP(mockGame, bitSystem);
                
                output.textContent += `âœ… ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–æˆåŠŸ\n`;
                output.textContent += `CSPã‚½ãƒ«ãƒãƒ¼ã‚¿ã‚¤ãƒ—: ${typeof cspSolver}\n`;
                output.textContent += `ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿: ${cspSolver.constructor.name}\n\n`;
                
                // Phase4-3ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒƒã‚¯
                const methods = [
                    'implementDynamicStrategySelectionBit',
                    'createAdaptivePerformanceTuningBit', 
                    'buildPredictiveOptimizationBit',
                    'implementSelfLearningSystemBit'
                ];
                
                output.textContent += `Phase4-3ãƒ¡ã‚½ãƒƒãƒ‰ãƒã‚§ãƒƒã‚¯:\n`;
                methods.forEach(method => {
                    const exists = typeof cspSolver[method] === 'function';
                    output.textContent += `  ${method}: ${exists ? 'FOUND' : 'MISSING'}\n`;
                });
                
                // Phase4-2ãƒ¡ã‚½ãƒƒãƒ‰æ¯”è¼ƒãƒã‚§ãƒƒã‚¯
                output.textContent += `\nPhase4-2ãƒ¡ã‚½ãƒƒãƒ‰æ¯”è¼ƒ:\n`;
                const phase42Methods = ['optimizeMemoryLayoutBit', 'implementCPUCacheOptimizationBit'];
                phase42Methods.forEach(method => {
                    const exists = typeof cspSolver[method] === 'function';
                    output.textContent += `  ${method}: ${exists ? 'FOUND' : 'MISSING'}\n`;
                });
                
                // å…¨ãƒ¡ã‚½ãƒƒãƒ‰æ•°
                const allMethods = Object.getOwnPropertyNames(Object.getPrototypeOf(cspSolver))
                    .filter(name => typeof cspSolver[name] === 'function' && name !== 'constructor');
                output.textContent += `\nç·ãƒ¡ã‚½ãƒƒãƒ‰æ•°: ${allMethods.length}\n`;
                
                // Phase4-3ãƒ¡ã‚½ãƒƒãƒ‰ãŒè¦‹ã¤ã‹ã£ãŸå ´åˆã€å®Ÿè¡Œãƒ†ã‚¹ãƒˆ
                if (typeof cspSolver.implementDynamicStrategySelectionBit === 'function') {
                    output.textContent += `\nğŸ¯ å‹•çš„æˆ¦ç•¥é¸æŠãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­...\n`;
                    const result = cspSolver.implementDynamicStrategySelectionBit();
                    output.textContent += `çµæœ: ${JSON.stringify(result, null, 2)}\n`;
                }
                
            } catch (error) {
                output.textContent += `âŒ ã‚¨ãƒ©ãƒ¼: ${error.message}\n`;
                output.textContent += `ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹: ${error.stack}\n`;
                console.error('è©³ç´°ã‚¨ãƒ©ãƒ¼:', error);
            }
        }
    </script>
</body>
</html>