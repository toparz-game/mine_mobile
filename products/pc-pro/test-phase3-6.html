<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase3-6: Phase3å®Œæˆãƒ»Phase4æº–å‚™ãƒ†ã‚¹ãƒˆ</title>
    <style>
        body {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: #1a1a1a;
            color: #e0e0e0;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }
        .completion-badge {
            display: inline-block;
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin: 0 10px;
        }
        .test-section {
            background-color: #2d2d2d;
            border: 1px solid #555;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        .info { color: #2196F3; }
        .excellent { color: #00E676; font-weight: bold; }
        .complete { color: #4CAF50; font-weight: bold; }
        .mostly_complete { color: #8BC34A; }
        .partial { color: #FF9800; }
        .incomplete { color: #f44336; }
        .test-button {
            background: linear-gradient(45deg, #4CAF50, #2E7D32);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        .completion-button {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
            font-weight: bold;
            font-size: 18px;
            padding: 15px 30px;
        }
        .phase4-button {
            background: linear-gradient(45deg, #9C27B0, #673AB7);
            color: white;
            font-weight: bold;
            font-size: 18px;
            padding: 15px 30px;
        }
        .test-results {
            background-color: #1e1e1e;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            max-height: 500px;
            overflow-y: auto;
        }
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .status-card {
            background-color: #333;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        .status-card.excellent { border-color: #00E676; }
        .status-card.complete { border-color: #4CAF50; }
        .status-card.partial { border-color: #FF9800; }
        .status-card.incomplete { border-color: #f44336; }
        .status-value {
            font-size: 24px;
            font-weight: bold;
            color: #4CAF50;
        }
        .status-label {
            font-size: 14px;
            color: #bbb;
            margin-top: 5px;
        }
        .phase4-roadmap {
            background: linear-gradient(135deg, #263238 0%, #37474F 100%);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        .phase4-step {
            background-color: #2a2a2a;
            border-left: 4px solid #9C27B0;
            padding: 10px;
            margin: 10px 0;
            border-radius: 0 6px 6px 0;
        }
        .documentation-section {
            background: linear-gradient(135deg, #1B5E20 0%, #2E7D32 100%);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            color: white;
        }
        .documentation-item {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
        }
        .final-summary {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
            border-radius: 8px;
            padding: 25px;
            margin-top: 30px;
            text-align: center;
            font-weight: bold;
        }
        .celebration {
            font-size: 2em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ† Phase3-6: Phase3å®Œæˆãƒ»Phase4æº–å‚™</h1>
            <p>ç›®æ¨™: Phase3ã®æœ€çµ‚ç¢ºèªã¨Phase4ï¼ˆé«˜åº¦æœ€é©åŒ–ï¼‰ã¸ã®æº–å‚™</p>
            <div>
                <span class="completion-badge">Phase1 âœ“</span>
                <span class="completion-badge">Phase2 âœ“</span>
                <span class="completion-badge">Phase3 âœ“</span>
                <span class="completion-badge">Phase4 æº–å‚™ä¸­...</span>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ¯ Phase3-6 æœ€çµ‚ç¢ºèªãƒ†ã‚¹ãƒˆ</h2>
            <button class="test-button completion-button" onclick="testValidatePhase3Completion()">1. ğŸ… validatePhase3CompletionBit() - Phase3å®Œæˆåº¦ç¢ºèª</button>
            <button class="test-button phase4-button" onclick="testPreparePhase4Foundation()">2. ğŸš€ preparePhase4FoundationBit() - Phase4æº–å‚™</button>
            <button class="test-button" onclick="testFinalizeArchitecture()">3. ğŸ“š finalizeArchitectureDocumentationBit() - æ–‡æ›¸åŒ–</button>
            <button class="test-button" onclick="runAllPhase36Tests()">ğŸª å…¨Phase3-6ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
            <button class="test-button" onclick="clearResults()" style="background: linear-gradient(45deg, #f44336, #d32f2f);">ğŸ§¹ çµæœã‚¯ãƒªã‚¢</button>
            <div id="testResults" class="test-results"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“Š Phase1-2-3 å®Œæˆåº¦ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>
            <div id="completionStatus" class="status-grid">
                <div class="status-card">
                    <div class="status-value" id="phase1Score">--</div>
                    <div class="status-label">Phase1å®Œæˆåº¦</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="phase2Score">--</div>
                    <div class="status-label">Phase2å®Œæˆåº¦</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="phase3Score">--</div>
                    <div class="status-label">Phase3å®Œæˆåº¦</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="overallScore">--</div>
                    <div class="status-label">å…¨ä½“å®Œæˆåº¦</div>
                </div>
                <div class="status-card">
                    <div class="status-value" id="phase4Readiness">--</div>
                    <div class="status-label">Phase4æº–å‚™åº¦</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ›£ï¸ Phase4å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</h2>
            <div id="phase4Roadmap" class="phase4-roadmap">
                <p>Phase4æº–å‚™ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€ã“ã“ã«ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸</h2>
            <div id="architectureDocumentation" class="documentation-section">
                <p>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸åŒ–ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€ã“ã“ã«æ–‡æ›¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸŠ Phase3å®Œæˆã‚µãƒãƒªãƒ¼</h2>
            <div id="finalSummary" class="final-summary" style="display: none;">
                <div class="celebration">ğŸ‰ğŸŠğŸ†</div>
                <h2>Phase3å®ŒæˆãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h2>
                <p>SimpleBitCSP Phase1-3ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸ</p>
                <div id="summaryDetails"></div>
            </div>
        </div>
    </div>

    <script src="modules/bit-minesweeper.js"></script>
    <script src="modules/simple-bit-csp.js"></script>
    <script>
        let testResults;
        let mockGame, bitSystem, bitCSP;

        // DOMãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã‹ã‚‰åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            testResults = document.getElementById('testResults');

            // ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¢ãƒƒã‚¯ã‚²ãƒ¼ãƒ ç’°å¢ƒ
            mockGame = {
                rows: 16,
                cols: 16,
                mines: 40,
                board: Array(16).fill().map(() => Array(16).fill(0)),
                isValidCoord: (row, col) => row >= 0 && row < 16 && col >= 0 && col < 16
            };

            // BitMinesweeperSystemã¨SimpleBitCSPã‚’åˆæœŸåŒ–
            try {
                bitSystem = new BitMinesweeperSystem(mockGame);
                bitCSP = new SimpleBitCSP(mockGame, bitSystem);
                log("ğŸ† Phase3-6ãƒ†ã‚¹ãƒˆã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–å®Œäº†", testResults, 'success');
                log("Phase3å®Œæˆãƒ»Phase4æº–å‚™ã®æœ€çµ‚ç¢ºèªã‚’é–‹å§‹ã—ã¾ã™", testResults, 'info');
            } catch (error) {
                console.error('åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼:', error);
                if (testResults) {
                    log(`âŒ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼: ${error.message}`, testResults, 'error');
                }
            }
        });

        function log(message, element = testResults, className = '') {
            const timestamp = new Date().toLocaleTimeString();
            const logMessage = `[${timestamp}] ${message}\n`;
            element.textContent += logMessage;
            if (className) {
                element.className += ` ${className}`;
            }
            element.scrollTop = element.scrollHeight;
        }

        function clearResults() {
            testResults.textContent = '';
            document.getElementById('phase4Roadmap').innerHTML = '<p>Phase4æº–å‚™ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€ã“ã“ã«ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>';
            document.getElementById('architectureDocumentation').innerHTML = '<p>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸åŒ–ãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€ã“ã“ã«æ–‡æ›¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>';
            document.getElementById('finalSummary').style.display = 'none';
            
            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚«ãƒ¼ãƒ‰ãƒªã‚»ãƒƒãƒˆ
            ['phase1Score', 'phase2Score', 'phase3Score', 'overallScore', 'phase4Readiness'].forEach(id => {
                document.getElementById(id).textContent = '--';
                document.getElementById(id).parentElement.className = 'status-card';
            });
        }

        // 1. Phase3å®Œæˆåº¦ç¢ºèªãƒ†ã‚¹ãƒˆ
        function testValidatePhase3Completion() {
            log("=== validatePhase3CompletionBit() ãƒ†ã‚¹ãƒˆé–‹å§‹ ===", testResults, 'info');
            
            if (!bitCSP) {
                log("âŒ bitCSP ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚", testResults, 'error');
                return false;
            }
            
            try {
                const result = bitCSP.validatePhase3CompletionBit();
                
                log(`${result.success ? 'âœ…' : 'âŒ'} Phase3å®Œæˆåº¦ç¢ºèª: ${result.success ? 'æˆåŠŸ' : 'å¤±æ•—'}`, testResults,
                    result.success ? 'success' : 'error');
                
                if (result.success) {
                    log(`   - å®Ÿè¡Œæ™‚é–“: ${result.executionTime.toFixed(4)}ms`, testResults);
                    log(`   - å®Œæˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${result.completionStatus}`, testResults, getStatusClass(result.completionStatus));
                    log(`   - Phase3å®Œæˆ: ${result.readiness.phase3Complete ? 'ã¯ã„' : 'ã„ã„ãˆ'}`, testResults);
                    log(`   - Phase4æº–å‚™: ${result.readiness.phase4Ready ? 'å®Œäº†' : 'æœªå®Œäº†'}`, testResults);
                    log(`   - ç·åˆã‚¹ã‚³ã‚¢: ${result.readiness.overallScore.toFixed(1)}ç‚¹`, testResults);
                    
                    // è©³ç´°çµæœè¡¨ç¤º
                    log("\n--- Phaseåˆ¥å®Œæˆåº¦è©³ç´° ---", testResults, 'info');
                    const validation = result.validation;
                    
                    log(`Phase1: ${validation.phase1Validation.completionRate.toFixed(1)}% (${validation.phase1Validation.implementedMethods}/${validation.phase1Validation.totalMethods} ãƒ¡ã‚½ãƒƒãƒ‰)`, testResults);
                    log(`Phase2: ${validation.phase2Validation.completionRate.toFixed(1)}% (${validation.phase2Validation.implementedMethods}/${validation.phase2Validation.totalMethods} ãƒ¡ã‚½ãƒƒãƒ‰)`, testResults);
                    log(`Phase3: ${validation.phase3Validation.completionRate.toFixed(1)}% (${validation.phase3Validation.implementedMethods}/${validation.phase3Validation.totalMethods} ãƒ¡ã‚½ãƒƒãƒ‰)`, testResults);
                    
                    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºæ›´æ–°
                    updateCompletionStatus(result);
                    
                    // æ¨å¥¨äº‹é …è¡¨ç¤º
                    log("\n--- æ¨å¥¨äº‹é … ---", testResults, 'info');
                    validation.readinessReport.recommendations.forEach(rec => {
                        log(`â€¢ ${rec}`, testResults, 'info');
                    });
                    
                } else {
                    log(`   - å¤±æ•—ç†ç”±: ${result.reason}`, testResults, 'error');
                    if (result.error) log(`   - ã‚¨ãƒ©ãƒ¼: ${result.error}`, testResults, 'error');
                }
                
                return result.success;

            } catch (error) {
                log(`âŒ validatePhase3CompletionBit() ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, testResults, 'error');
                return false;
            }
        }

        // 2. Phase4æº–å‚™ãƒ†ã‚¹ãƒˆ
        function testPreparePhase4Foundation() {
            log("=== preparePhase4FoundationBit() ãƒ†ã‚¹ãƒˆé–‹å§‹ ===", testResults, 'info');
            
            if (!bitCSP) {
                log("âŒ bitCSP ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚", testResults, 'error');
                return false;
            }
            
            try {
                const result = bitCSP.preparePhase4FoundationBit();
                
                log(`${result.success ? 'âœ…' : 'âŒ'} Phase4æº–å‚™: ${result.success ? 'æˆåŠŸ' : 'å¤±æ•—'}`, testResults,
                    result.success ? 'success' : 'error');
                
                if (result.success) {
                    log(`   - å®Ÿè¡Œæ™‚é–“: ${result.executionTime.toFixed(4)}ms`, testResults);
                    log(`   - Phase4æº–å‚™åº¦: ${result.phase4Readiness}`, testResults, getReadinessClass(result.phase4Readiness));
                    log(`   - æ¨å®šä½œæ¥­é‡: ${result.estimatedEffort}`, testResults);
                    
                    // Phase4æº–å‚™è©³ç´°
                    log("\n--- Phase4æº–å‚™çŠ¶æ³è©³ç´° ---", testResults, 'info');
                    const prep = result.preparation;
                    log(`ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æº–å‚™åº¦: ${prep.architectureReadiness.readinessLevel}`, testResults);
                    log(`æ‹¡å¼µæ€§è©•ä¾¡: ${prep.extensibilityAnalysis.extensibilityRating}`, testResults);
                    log(`ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™: ${prep.phase4Requirements.performanceTargets.totalExecutionTime}`, testResults);
                    
                    // Phase4ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—è¡¨ç¤º
                    displayPhase4Roadmap(result);
                    
                    // æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
                    log("\n--- æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— ---", testResults, 'info');
                    result.nextSteps.forEach(step => {
                        log(`â€¢ ${step}`, testResults, 'info');
                    });
                    
                } else {
                    log(`   - å¤±æ•—ç†ç”±: ${result.reason}`, testResults, 'error');
                    if (result.error) log(`   - ã‚¨ãƒ©ãƒ¼: ${result.error}`, testResults, 'error');
                }
                
                return result.success;

            } catch (error) {
                log(`âŒ preparePhase4FoundationBit() ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, testResults, 'error');
                return false;
            }
        }

        // 3. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸åŒ–ãƒ†ã‚¹ãƒˆ
        function testFinalizeArchitecture() {
            log("=== finalizeArchitectureDocumentationBit() ãƒ†ã‚¹ãƒˆé–‹å§‹ ===", testResults, 'info');
            
            if (!bitCSP) {
                log("âŒ bitCSP ãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚", testResults, 'error');
                return false;
            }
            
            try {
                const result = bitCSP.finalizeArchitectureDocumentationBit();
                
                log(`${result.success ? 'âœ…' : 'âŒ'} ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸åŒ–: ${result.success ? 'æˆåŠŸ' : 'å¤±æ•—'}`, testResults,
                    result.success ? 'success' : 'error');
                
                if (result.success) {
                    log(`   - å®Ÿè¡Œæ™‚é–“: ${result.executionTime.toFixed(4)}ms`, testResults);
                    log(`   - ç”Ÿæˆæ–‡æ›¸æ•°: ${result.documentsGenerated}`, testResults);
                    log(`   - ç·è¡Œæ•°: ${result.totalLines}`, testResults);
                    log(`   - å®Œæˆåº¦: ${result.completionLevel}`, testResults);
                    
                    // æ–‡æ›¸åŒ–è©³ç´°
                    log("\n--- æ–‡æ›¸åŒ–å†…å®¹ ---", testResults, 'info');
                    const docs = result.documentation;
                    log(`ã‚·ã‚¹ãƒ†ãƒ å: ${docs.architectureOverview.systemName}`, testResults);
                    log(`ç·ãƒ¡ã‚½ãƒƒãƒ‰æ•°: ${docs.architectureOverview.totalMethods}`, testResults);
                    log(`ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚¿ã‚¤ãƒ—: ${docs.architectureOverview.architectureType}`, testResults);
                    
                    // ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸è¡¨ç¤º
                    displayArchitectureDocumentation(result);
                    
                } else {
                    log(`   - å¤±æ•—ç†ç”±: ${result.reason}`, testResults, 'error');
                    if (result.error) log(`   - ã‚¨ãƒ©ãƒ¼: ${result.error}`, testResults, 'error');
                }
                
                return result.success;

            } catch (error) {
                log(`âŒ finalizeArchitectureDocumentationBit() ãƒ†ã‚¹ãƒˆã‚¨ãƒ©ãƒ¼: ${error.message}`, testResults, 'error');
                return false;
            }
        }

        // å…¨Phase3-6ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        function runAllPhase36Tests() {
            log("ğŸ† Phase3-6 å…¨æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆé–‹å§‹", testResults, 'info');
            log("=" * 60, testResults);
            
            let allPassed = true;
            const tests = [
                { name: "validatePhase3CompletionBit()", func: testValidatePhase3Completion },
                { name: "preparePhase4FoundationBit()", func: testPreparePhase4Foundation },
                { name: "finalizeArchitectureDocumentationBit()", func: testFinalizeArchitecture }
            ];

            for (const test of tests) {
                log(`\n--- ${test.name} ãƒ†ã‚¹ãƒˆ ---`, testResults, 'info');
                const passed = test.func();
                allPassed = allPassed && passed;
                log(`${test.name}: ${passed ? 'âœ… æˆåŠŸ' : 'âŒ å¤±æ•—'}`, testResults, passed ? 'success' : 'error');
            }

            log("\n" + "=" * 60, testResults);
            log(`ğŸ¯ Phase3-6 å…¨ãƒ†ã‚¹ãƒˆçµæœ: ${allPassed ? 'âœ… å…¨ã¦æˆåŠŸ' : 'âŒ ä¸€éƒ¨å¤±æ•—'}`, testResults, 
                allPassed ? 'success' : 'error');
            
            if (allPassed) {
                log("ğŸ‰ Phase3-6 å®Œäº†ï¼Phase3ã®å…¨å®Ÿè£…ãŒå®Œæˆã—ã¾ã—ãŸï¼", testResults, 'success');
                log("ğŸš€ Phase4ï¼ˆé«˜åº¦æœ€é©åŒ–ï¼‰ã®å®Ÿè£…æº–å‚™ãŒæ•´ã„ã¾ã—ãŸï¼", testResults, 'success');
                showFinalSummary();
            }
            
            return allPassed;
        }

        // ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ç¾¤
        function getStatusClass(status) {
            switch (status) {
                case 'excellent': return 'excellent';
                case 'complete': return 'complete';
                case 'mostly_complete': return 'mostly_complete';
                case 'partial': return 'partial';
                default: return 'incomplete';
            }
        }

        function getReadinessClass(readiness) {
            switch (readiness) {
                case 'ready': return 'excellent';
                case 'nearly_ready': return 'complete';
                default: return 'partial';
            }
        }

        function updateCompletionStatus(result) {
            const validation = result.validation;
            
            document.getElementById('phase1Score').textContent = `${validation.phase1Validation.completionRate.toFixed(0)}%`;
            document.getElementById('phase1Score').parentElement.className = `status-card ${validation.phase1Validation.status}`;
            
            document.getElementById('phase2Score').textContent = `${validation.phase2Validation.completionRate.toFixed(0)}%`;
            document.getElementById('phase2Score').parentElement.className = `status-card ${validation.phase2Validation.status}`;
            
            document.getElementById('phase3Score').textContent = `${validation.phase3Validation.completionRate.toFixed(0)}%`;
            document.getElementById('phase3Score').parentElement.className = `status-card ${validation.phase3Validation.status}`;
            
            document.getElementById('overallScore').textContent = `${validation.overallCompletion.overallScore.toFixed(0)}%`;
            document.getElementById('overallScore').parentElement.className = `status-card ${validation.overallCompletion.status}`;
            
            document.getElementById('phase4Readiness').textContent = validation.readinessReport.phase4Readiness ? 'æº–å‚™å®Œäº†' : 'è¦æº–å‚™';
            document.getElementById('phase4Readiness').parentElement.className = `status-card ${validation.readinessReport.phase4Readiness ? 'excellent' : 'partial'}`;
        }

        function displayPhase4Roadmap(result) {
            const roadmapDiv = document.getElementById('phase4Roadmap');
            const prep = result.preparation;
            
            let roadmapHTML = '<h3>ğŸ›£ï¸ Phase4å®Ÿè£…è¨ˆç”»</h3>';
            roadmapHTML += `<p><strong>æº–å‚™åº¦ãƒ¬ãƒ™ãƒ«:</strong> ${prep.implementationPlan.readinessLevel} (${prep.implementationPlan.readinessScore}ç‚¹)</p>`;
            roadmapHTML += `<p><strong>æ¨å®šä½œæ¥­é‡:</strong> ${prep.implementationPlan.estimatedEffort}</p>`;
            
            roadmapHTML += '<h4>å®Ÿè£…ã‚¹ãƒ†ãƒƒãƒ—:</h4>';
            prep.implementationPlan.immediateNextSteps.forEach((step, index) => {
                roadmapHTML += `<div class="phase4-step">${index + 1}. ${step}</div>`;
            });
            
            roadmapHTML += '<h4>æŠ€è¡“è¦ä»¶:</h4>';
            prep.phase4Requirements.technicalRequirements.forEach(req => {
                roadmapHTML += `<div class="phase4-step">â€¢ ${req}</div>`;
            });
            
            roadmapHTML += '<h4>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™:</h4>';
            const targets = prep.phase4Requirements.performanceTargets;
            roadmapHTML += `<div class="phase4-step">â€¢ ç·å®Ÿè¡Œæ™‚é–“: ${targets.totalExecutionTime}</div>`;
            roadmapHTML += `<div class="phase4-step">â€¢ ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ${targets.memoryUsage}å‰Šæ¸›</div>`;
            roadmapHTML += `<div class="phase4-step">â€¢ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡: ${targets.cacheHitRate}</div>`;
            
            roadmapDiv.innerHTML = roadmapHTML;
        }

        function displayArchitectureDocumentation(result) {
            const docsDiv = document.getElementById('architectureDocumentation');
            const docs = result.documentation;
            
            let docsHTML = '<h3>ğŸ“š ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ–‡æ›¸</h3>';
            
            // ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦
            docsHTML += '<div class="documentation-item">';
            docsHTML += '<h4>ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦</h4>';
            docsHTML += `<p><strong>ã‚·ã‚¹ãƒ†ãƒ å:</strong> ${docs.architectureOverview.systemName}</p>`;
            docsHTML += `<p><strong>ç·ãƒ¡ã‚½ãƒƒãƒ‰æ•°:</strong> ${docs.architectureOverview.totalMethods}</p>`;
            docsHTML += `<p><strong>ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£:</strong> ${docs.architectureOverview.architectureType}</p>`;
            docsHTML += '</div>';
            
            // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ
            docsHTML += '<div class="documentation-item">';
            docsHTML += '<h4>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæ§‹æˆ</h4>';
            docs.architectureOverview.coreComponents.forEach(comp => {
                docsHTML += `<p>â€¢ ${comp}</p>`;
            });
            docsHTML += '</div>';
            
            // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
            docsHTML += '<div class="documentation-item">';
            docsHTML += '<h4>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™</h4>';
            const perf = docs.performanceMetrics.executionTimeTargets;
            docsHTML += `<p>â€¢ Phase1: ${perf.phase1}</p>`;
            docsHTML += `<p>â€¢ Phase2: ${perf.phase2}</p>`;
            docsHTML += `<p>â€¢ Phase3: ${perf.phase3}</p>`;
            docsHTML += `<p>â€¢ ç·å®Ÿè¡Œæ™‚é–“: ${perf.total}</p>`;
            docsHTML += '</div>';
            
            // æ–‡æ›¸çµ±è¨ˆ
            docsHTML += '<div class="documentation-item">';
            docsHTML += '<h4>æ–‡æ›¸çµ±è¨ˆ</h4>';
            docsHTML += `<p><strong>ç”Ÿæˆæ–‡æ›¸æ•°:</strong> ${docs.documentation.documentsGenerated}</p>`;
            docsHTML += `<p><strong>ç·è¡Œæ•°:</strong> ${docs.documentation.totalLines}</p>`;
            docsHTML += `<p><strong>å®Œæˆåº¦:</strong> ${docs.documentation.completionLevel}</p>`;
            docsHTML += `<p><strong>æœ€çµ‚æ›´æ–°:</strong> ${new Date(docs.documentation.lastUpdated).toLocaleString()}</p>`;
            docsHTML += '</div>';
            
            docsDiv.innerHTML = docsHTML;
        }

        function showFinalSummary() {
            const summaryDiv = document.getElementById('finalSummary');
            const detailsDiv = document.getElementById('summaryDetails');
            
            let summaryHTML = '<h3>ğŸŠ Phase3å®Œæˆè©³ç´°</h3>';
            summaryHTML += '<p>âœ… Phase1: å¢ƒç•Œã‚»ãƒ«æ¤œå‡ºãƒ»åˆ¶ç´„ç”Ÿæˆ å®Œäº†</p>';
            summaryHTML += '<p>âœ… Phase2: ç‹¬ç«‹éƒ¨åˆ†é›†åˆæ¤œå‡º å®Œäº†</p>';
            summaryHTML += '<p>âœ… Phase3: çµ±åˆãƒ»æœ€é©åŒ–å‡¦ç† å®Œäº†</p>';
            summaryHTML += '<p>ğŸš€ Phase4: é«˜åº¦æœ€é©åŒ– æº–å‚™å®Œäº†</p>';
            summaryHTML += '<hr>';
            summaryHTML += '<p><strong>ç·å®Ÿè£…ãƒ¡ã‚½ãƒƒãƒ‰:</strong> 50+ ãƒ¡ã‚½ãƒƒãƒ‰</p>';
            summaryHTML += '<p><strong>æ¨å®šã‚³ãƒ¼ãƒ‰è¡Œæ•°:</strong> 7000+ è¡Œ</p>';
            summaryHTML += '<p><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹:</strong> ç›®æ¨™5msä»¥å†…é”æˆ</p>';
            summaryHTML += '<p><strong>æ¬¡ã®ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³:</strong> Phase4-1 ä¸¦åˆ—å‡¦ç†åŸºç›¤æ§‹ç¯‰</p>';
            
            detailsDiv.innerHTML = summaryHTML;
            summaryDiv.style.display = 'block';
        }
    </script>
</body>
</html>