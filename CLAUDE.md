# CLAUDE.md

このファイルはClaude Code (claude.ai/code) がこのリポジトリで作業する際のガイダンスを提供します。

## プロジェクト概要

モバイルとPCプラットフォーム向けに最適化されたマインスイーパーゲームです。バニラHTML/CSS/JavaScriptで構築され、共通のコアモジュールを共有するデバイス固有のバージョンを持つモノレポ構造を使用しています。

## アーキテクチャ

### ディレクトリ構造
- `/core/minesweeper-core.js` - 共有ゲームロジックを持つ基底クラス（ボード初期化、地雷配置、セル開示、タイマー、勝敗条件）
- `/products/mobile/` - タッチコントロールとピンチズーム機能を持つモバイル版
- `/products/pc/` - マウスコントロールを持つPC版
- `/index.html` - デバイスタイプを自動検出してリダイレクトするランディングページ

### 主要クラス
- `MinesweeperCore` - core/minesweeper-core.js内の基底クラス、共通ゲームメカニクスを提供
- `MobileMinesweeper` extends MinesweeperCore - タッチ処理、ズームコントロール、ドラッグスクロールなどモバイル固有の機能
- PC版はコアを拡張した独自の実装を持つ

## 開発コマンド

ビルドプロセスのないバニラJavaScriptプロジェクトです。開発方法：

1. **ローカル実行**: ブラウザで直接index.htmlを開くか、ローカルサーバーを使用：
   ```bash
   python3 -m http.server 8000
   # または
   npx http-server
   ```

2. **デプロイ**: mainブランチにプッシュ - GitHub Pagesがルートから自動的に配信

## 重要な実装詳細

### モバイル版の機能
- タッチコントロール: タップで開示、長押し（0.5秒）で旗
- 旗モードボタンで簡単に旗を立てられる
- 最小/最大制限付きピンチズーム（0.3倍〜3倍）
- フォントサイズ調整ボタン（50%〜200%）
- 隠し極限モード（64×64グリッド）を含む難易度レベル
- 大きなボード用のドラッグスクロール
- 誤って開示しないようマルチタッチ検出

### 難易度レベル
- 初級: 9×9、地雷10個
- 中級: 16×16、地雷40個
- 上級: 16×30、地雷99個
- 特定の操作で利用可能な隠し難易度

### 状態管理
- MinesweeperCoreでゲーム状態を追跡: board、revealed、flagged、questioned配列
- 最初のクリックでタイマー開始、クリック位置への地雷配置を回避
- 勝利条件: 地雷以外のすべてのセルを開示
- 敗北条件: 地雷を開示

## テストアプローチ

ブラウザでの手動テスト - 自動テストフレームワークなし。テストシナリオ：
- ランディングページでのデバイス検出
- モバイルデバイスでのタッチコントロール
- ピンチジェスチャーでのズーム機能
- 旗モードトグル動作
- ゲームリセットと難易度変更
- 勝敗条件