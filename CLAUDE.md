# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際のClaude Code (claude.ai/code) 向けのガイダンスを提供します。

## プロジェクト概要

これは複数のプラットフォーム（モバイル、PC、プロ版）に最適化された、異なる製品バリアントを持つモノレポ構造のマインスイーパーゲームプロジェクトです。プロジェクトはバニラJavaScript、HTML5、CSS3を使用し、ビルドツールやパッケージマネージャーは使用していません。

## リポジトリ構造

- **`/core`**: `minesweeper-core.js` を含む - すべてのバージョンが継承する共有ゲームロジックを持つ基底クラス
- **`/products`**: 異なるゲームバリアントを含む:
  - `mobile/`: タッチ操作に最適化されたモバイル版
  - `pc/`: 標準的なPC版
  - `pc-pro/`: CSPソルバーモジュールを含む高度なPC版
- **`/shared`**: 共通のアセット、スタイル、ユーティリティ
- **ルートファイル**: メインランディングページ（`index.html`）と基本ゲーム実装

## 主要なアーキテクチャ概念

### コア・プロダクトパターン
すべてのゲームバリアントは `/core/minesweeper-core.js` の `MinesweeperCore` クラスを継承または利用します。各製品バージョンはプラットフォーム固有の機能でこれを拡張します：
- モバイル版: タッチジェスチャー、ピンチズーム、長押しで旗を立てる
- PC版: 標準的なマウスコントロール
- PCプロ版: `modules/csp-solver.js` にCSP（制約充足問題）ソルバーを含む

### ビルドプロセスなし
これはブラウザで直接実行される静的サイトプロジェクトです。ビルド、コンパイル、バンドリングのステップはありません。HTMLファイルを直接開くか、GitHub Pages経由で提供するだけです。

## 開発ガイドライン

### 新機能の追加
1. 共通機能は `/core/minesweeper-core.js` に追加する
2. 製品固有の機能は各 `/products/[variant]/game.js` に追加する
3. 新しい製品バリアントを追加する際はランディングページ（`/index.html`）を更新する

### テスト
HTMLファイルをブラウザで直接開くか、ローカルサーバーを使用：
```bash
python -m http.server 8000
# または
npx serve
```

### デプロイ
プロジェクトはGitHub Pagesデプロイ用に設計されています。サイト構造はURLに直接マッピングされます：
- メインページ: `https://[username].github.io/mine_web_sumaho/`
- 製品: `https://[username].github.io/mine_web_sumaho/products/[variant]/`

## 重要な実装詳細

- **タッチ/クリック処理**: コードは `'ontouchstart' in window` を使用してタッチデバイスとデスクトップを区別
- **ゲーム状態**: `gameOver`、`gameWon`、`firstClick` などのフラグで管理
- **タイマー管理**: Visibility API統合による一時停止/再開機能を含む
- **難易度レベル**: 標準（初級/中級/上級）と隠し極限難易度を含む
- **ズーム/スケール**: モバイル版はピンチズームとフォントサイズコントロールを実装