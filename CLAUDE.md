# CLAUDE.md

このファイルは、このリポジトリのコードを扱う際のClaude Code (claude.ai/code) への指示書です。

## プロジェクト概要

モバイル最適化されたマインスイーパーゲーム。Vanilla JavaScript、HTML5、CSS3で構築。複数のゲームバージョンをサポートするモノレポ構造を採用。

## アーキテクチャ

### コアコンポーネント

- **MinesweeperCore** (`core/minesweeper-core.js`): 共通ゲームロジックを提供する基底クラス。ボード初期化、地雷配置、セル開示、旗管理、勝敗判定、タイマー機能を含む。全ゲームバージョンがこのクラスを継承または利用。

- **メインゲーム** (`game.js`): MinesweeperCoreを拡張した主要実装。タッチ操作、ズーム機能、テーマ管理、隠し難易度を含む各種難易度レベルなどモバイル特化機能を実装。

- **製品バリアント** (`products/`): 異なるゲームバージョン用ディレクトリ:
  - `simple/`: 独自実装を持つ完成版シンプルバージョン
  - `dx/`: 追加機能を持つデラックス版（開発予定）

### 主要機能

- **タッチ最適化操作**: 短タップで開く、長押し（200ms）で旗、ダブルタップでコード開示
- **複数難易度**: 初級、中級、上級、プラス隠し難易度（hiddeneasy、hiddenmedium、hiddenhard、extreme）
- **レスポンシブデザイン**: ズーム操作付き画面サイズ自動対応
- **テーマシステム**: localStorage永続化付きダーク/ライトモード
- **省電力モード**: グラデーション・影を無効化するオプション
- **旗アニメーション**: 旗の設置/除去時の視覚的フィードバック

## 開発コマンド

ビルドプロセス不要の静的HTML/JavaScriptプロジェクト。

### プロジェクトの実行
```bash
# index.htmlを直接ブラウザで開くか、ローカルサーバーを使用:
python3 -m http.server 8000
# または
npx serve .
```

### デプロイ
GitHub Pages用に設計。リポジトリ設定でmainブランチを指定してGitHub Pagesを有効化するだけ。

## コード規約

- フレームワークなしのVanilla JavaScript (ES6+)を使用
- 全UI決定でモバイルファーストアプローチ
- ユーザー設定はlocalStorageに保存
- テーマ用にCSS変数を使用
- ゲームロジック（core）とUI（game.js）の分離を維持
- イベントリスナーはタッチとマウスイベント両方を適切に処理

## テスト方法

デバイス横断での手動テストが必要：
- モバイルデバイスでタッチ操作をテスト
- ズーム機能が正しく動作することを確認
- セッション間でテーマが永続化されることを確認
- 隠しレベルを含む全難易度をテスト
- 旗アニメーションと省電力モードを確認