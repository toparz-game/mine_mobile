# CLAUDE.md

このファイルは、Claude Code (claude.ai/code) がこのリポジトリで作業する際のガイダンスを提供します。

## プロジェクト概要

モバイル最適化されたマインスイーパーゲーム。vanilla HTML/CSS/JavaScriptで構築。共通コアを共有する複数バージョン（mobile、PC、DX）をサポートするモノレポ構造を採用。

## コマンド

ビルドプロセスのない静的Webアプリケーション：
- **ローカル実行**: `products/mobile/index.html` または `products/pc/index.html` をブラウザで直接開く
- **デプロイ**: GitHubにプッシュしてGitHub Pagesを有効化（mainブランチから配信）
- **npm/ビルド/テストコマンドなし**: 純粋なvanilla JavaScriptプロジェクト

## アーキテクチャ

### コアモジュールパターン
- `/core/minesweeper-core.js`: ゲームロジックを持つ基底クラス（ボード管理、地雷配置、勝利/敗北条件）
- 製品バージョンは `MinesweeperCore` クラスを拡張してプラットフォーム固有の機能を追加
- ES6クラスを使用した継承ベースのアーキテクチャ

### 製品構造
```
/products/
├── mobile/   # タッチ最適化版（長押し、ピンチズーム対応）
├── pc/       # デスクトップ版（マウス操作）
└── dx/       # 拡張版（計画中）
```

各製品は独自のHTML/CSS/JSを持つ自己完結型で、以下のようにコアモジュールをインポート：
```javascript
class MobileMinesweeper extends MinesweeperCore { ... }
```

### バージョン別の主要機能

**モバイル版 (`/products/mobile/`):**
- タッチ操作: タップで開く、長押しで旗を立てる
- 大きなボードでピンチズームとドラッグスクロール
- 旗モードトグルで簡単に旗を立てる
- 隠し/エクストリームモードを含む難易度レベル
- ビューポートスケーリングによるレスポンシブデザイン

**PC版 (`/products/pc/`):**
- マウス操作: 左クリックで開く、右クリックで旗
- キーボードショートカット対応
- 標準難易度レベル

### ゲーム状態管理
- ボード状態: 地雷、開いたセル、旗、?マークの2次元配列
- 可視性変更時の一時停止/再開機能付きタイマーシステム
- 最初のクリック保護（最初のクリック後に地雷配置）
- 勝利条件: すべての非地雷セルが開かれる
- 敗北条件: 地雷セルが開かれる

## 開発ガイドライン

### 新機能の追加
1. 共通機能は `/core/minesweeper-core.js` へ
2. プラットフォーム固有の機能は各 `/products/*/game.js` へ
3. クラス継承とフックメソッドのオーバーライドを使用（`onGameOver`、`onGameWon` など）

### スタイリング
- 各製品は独自の `style.css` を持つ
- モバイル版はテーマ用のCSS変数を使用
- ビューポート単位とメディアクエリによるレスポンシブデザイン

### ランディングページ
ルートの `index.html` はデバイス検出に基づいてモバイル版またはPC版に自動リダイレクト：
```javascript
'ontouchstart' in window || navigator.maxTouchPoints > 0
```